{"ast":null,"code":"import _objectSpread from \"/Users/nick/devedit/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/nick/devedit/src/containers/Dashboard/index.js\";\nimport React from \"react\"; //import myimage from \"../../assets/images/nice-piccy3.jpg\";\n\nimport { compose } from \"recompose\";\nimport { withAuthorization, withEmailVerification } from \"../../components/Session\";\nimport { Link } from \"react-router-dom\";\nimport * as ROUTES from \"../../constants/routes.js\";\nimport { withFirebase } from \"../../components/Firebase\";\nimport ListItems from \"../../components/ListItems\";\nimport Create_article from \"../Create-article\";\nimport SearchBar from \"../../components/Search-bar\";\n\nclass Dashboard extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleInput = e => {\n      console.log(e.target.value);\n      this.setState({\n        search: e.target.value\n      });\n    };\n\n    this.state = {\n      articles: [],\n      search: \"\",\n      sortType: \"dsc\",\n      calculatedvote: []\n    };\n  }\n\n  componentDidMount() {\n    // let articles =this.props.firebase.articles()\n    this.unsubscribe = this.props.firebase.articles().orderBy(\"calculatedvote\", \"desc\") // here i have tried to  sort using the calculated vote\n    .onSnapshot(snapshot => {\n      let articles = [];\n      snapshot.forEach(doc => articles.push(_objectSpread({}, doc.data(), {\n        uid: doc.id\n      }))); // { collection: 'article',limit:5, orderBy: ['calculatedvote', 'des'] },\n      // console.log(\"Articles loaded here yo!\", articles);\n\n      this.setState({\n        articles\n      });\n    }); // let { calculatedvote } = this.props;\n  }\n\n  componentWillUnmount() {\n    this.unsubscribe();\n  }\n\n  render() {\n    const sortType = this.state.sortType;\n    let filteredArticles = this.state.articles.filter(article => {\n      return article.tags.toLowerCase().includes(this.state.search.toLowerCase()), // article.timeCreated.toLowerCase().includes(this.state.search.toLowerCase()),\n      article.title.toLowerCase().includes(this.state.search.toLowerCase()) // article.description\n      // .toLowerCase()\n      // .includes(this.state.search.toLowerCase())\n      ;\n    });\n    /* if (filteredArticles) {\n         filteredArticles.sort((a, b) => {\n             const isReversed = (sortType === 'asc') ? 1 : -1;\n             return isReversed * a.timeCreated.localeCompare(b.timeCreated)\n         })\n         //console.log(\"sortedComment\",sortedcomments)\n     }*/\n\n    return React.createElement(\"div\", {\n      className: \"wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"main-class\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"search-bar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(SearchBar, {\n      handleInput: this.handleInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"create-post\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(Create_article, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"popular-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      style: {\n        float: \"left\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Popular Posts\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(ListItems, {\n      filteredArticles: filteredArticles //recipes={this.state.recipes}\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    })));\n  }\n\n}\n\nconst condition = authUser => !!authUser;\n\nexport default compose(withFirebase, withAuthorization(condition))(Dashboard);","map":{"version":3,"sources":["/Users/nick/devedit/src/containers/Dashboard/index.js"],"names":["React","compose","withAuthorization","withEmailVerification","Link","ROUTES","withFirebase","ListItems","Create_article","SearchBar","Dashboard","Component","constructor","props","handleInput","e","console","log","target","value","setState","search","state","articles","sortType","calculatedvote","componentDidMount","unsubscribe","firebase","orderBy","onSnapshot","snapshot","forEach","doc","push","data","uid","id","componentWillUnmount","render","filteredArticles","filter","article","tags","toLowerCase","includes","title","float","condition","authUser"],"mappings":"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","sourcesContent":["import React from \"react\";\n//import myimage from \"../../assets/images/nice-piccy3.jpg\";\nimport { compose } from \"recompose\";\nimport {\n  withAuthorization,\n  withEmailVerification\n} from \"../../components/Session\";\nimport { Link } from \"react-router-dom\";\nimport * as ROUTES from \"../../constants/routes.js\";\nimport { withFirebase } from \"../../components/Firebase\";\nimport ListItems from \"../../components/ListItems\";\nimport Create_article from \"../Create-article\";\nimport SearchBar from \"../../components/Search-bar\";\nclass Dashboard extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      articles: [],\n        search: \"\" ,\n       sortType: \"dsc\",\n      calculatedvote:[],\n    };\n  }\n\n    componentDidMount() {\n        // let articles =this.props.firebase.articles()\n        this.unsubscribe = this.props.firebase.articles()\n           .orderBy(\"calculatedvote\",\"desc\")// here i have tried to  sort using the calculated vote\n            .onSnapshot(snapshot => {\n            let articles = [];\n            snapshot.forEach(doc => articles.push({ ...doc.data(), uid: doc.id }));\n           // { collection: 'article',limit:5, orderBy: ['calculatedvote', 'des'] },\n            \n            // console.log(\"Articles loaded here yo!\", articles);\n            this.setState({ articles });\n        });\n       // let { calculatedvote } = this.props;\n    \n  }\n\n\n  componentWillUnmount() {\n    this.unsubscribe();\n  }\n\n\n  \n  handleInput = e => {\n    console.log(e.target.value);\n    this.setState({\n      search: e.target.value\n    });\n  };\n    render() {\n        const { sortType } = this.state;\n     \n\n        let filteredArticles = this.state.articles.filter(article => {\n           \n      return (\n          article.tags.toLowerCase().includes(this.state.search.toLowerCase()),\n         // article.timeCreated.toLowerCase().includes(this.state.search.toLowerCase()),\n        article.title.toLowerCase().includes(this.state.search.toLowerCase())\n       // article.description\n         // .toLowerCase()\n         // .includes(this.state.search.toLowerCase())\n      )\n        });\n        \n     \n       /* if (filteredArticles) {\n            filteredArticles.sort((a, b) => {\n                const isReversed = (sortType === 'asc') ? 1 : -1;\n                return isReversed * a.timeCreated.localeCompare(b.timeCreated)\n            })\n            //console.log(\"sortedComment\",sortedcomments)\n        }*/\n      \n\n      \n\n    return (\n      <div className=\"wrapper\">\n        <div className=\"main-class\">\n        <div className=\"search-bar\" >\n          <SearchBar handleInput={this.handleInput} />\n        </div>\n        <div className=\"create-post\">\n          <Create_article />\n        </div>\n        \n        </div>\n        <div className=\"popular-title\">\n          <p style={{ float: \"left\" }}>Popular Posts</p>\n        </div>\n        <div>\n          <ListItems\n                    filteredArticles={filteredArticles}\n                  \n            //recipes={this.state.recipes}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nconst condition = authUser => !!authUser;\n\nexport default compose(withFirebase, withAuthorization(condition))(Dashboard);\n"]},"metadata":{},"sourceType":"module"}