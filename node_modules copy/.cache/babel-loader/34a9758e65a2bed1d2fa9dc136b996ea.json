{"ast":null,"code":"import _objectSpread from \"/Users/nick/devedit/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/nick/devedit/src/components/ListItem1/index.js\";\nimport React from \"react\"; //import myimage from \"../../assets/images/nice-piccy3.jpg\";\n\nimport { withFirebase } from \"../Firebase\";\nimport { compose } from \"recompose\";\nimport { withRouter } from \"react-router-dom\";\nimport { AuthUserContext } from \"../Session\";\n\nclass ListItem1 extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidUpdate = prevProps => {\n      if (prevProps.article !== this.props.article) {\n        this.calculatedvote(this.props.article.upvotes, this.props.article.downvotes);\n      }\n    };\n\n    this.checkurl = () => {\n      // console.log(\"check url\", this.props.article.url)\n      if (this.props.article.url === true) {\n        return React.createElement(\"a\", {\n          href: \"{this.props.article.url}\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, \"Related link\");\n      } else {\n        return null;\n      }\n    };\n\n    this.handleUpvote = authUser => {\n      const article = this.props.article;\n      let initialvote = [authUser.uid];\n\n      if (article.upvotes === 0) {\n        if (this.checkDownvote(authUser.uid, article.downvotes) === -1) {\n          this.setState({\n            downvotecolor: \"gray\",\n            upvotecolor: \"darkred\"\n          });\n          this.props.firebase.article(article.uid).set(_objectSpread({}, article, {\n            upvotes: initialvote\n          })); // console.log(\"upvotes\", this.upvotes)\n        } else {\n          let uidIndex = this.checkDownvote(authUser.uid, article.downvotes);\n          let articlearray = article.downvotes;\n          articlearray.splice(uidIndex, 1);\n          this.setState({\n            downvotecolor: \"gray\",\n            upvotecolor: \"darkred\"\n          });\n          this.props.firebase.article(article.uid).set(_objectSpread({}, article, {\n            upvotes: initialvote,\n            downvotes: articlearray\n          }));\n        }\n      } else {\n        if (this.checkUpvote(authUser.uid, article.upvotes) === -1) {\n          if (this.checkDownvote(authUser.uid, article.downvotes) === -1) {\n            // console.log(this.checkUpvote)\n            this.setState({\n              calculatedvote: this.state.calculatedvote + 1,\n              upvotecolor: \"darkred\",\n              downvotecolor: \"gray\"\n            });\n            let upvotes = article.upvotes;\n            let updatedUpvotes = upvotes;\n            updatedUpvotes.push(authUser.uid);\n            this.props.firebase.article(article.uid).set(_objectSpread({}, article, {\n              upvotes: updatedUpvotes\n            }));\n          } else {\n            //  console.log(\"checkDownvote\")\n            let uidindex = this.checkDownvote(authUser.uid, article.downvotes);\n            let articlearray = article.downvotes;\n            this.setState({\n              downvotecolor: \"gray\",\n              upvotecolor: \"darkred\"\n            });\n            articlearray.splice(uidindex, 1); //  console.log(\"article.upvote\", article.upvotes)\n            //let upvotesarray=article.upvotes.push(authUser.uid)\n\n            let upvotes = article.upvotes;\n            let updatedUpvotes = upvotes;\n            updatedUpvotes.push(authUser.uid);\n            this.props.firebase.article(article.uid).set(_objectSpread({}, article, {\n              downvotes: articlearray,\n              upvotes: updatedUpvotes\n            }));\n          }\n        } else {//  console.log(\"already upvoted\")\n        }\n      }\n    };\n\n    this.handleDownvote = authUser => {\n      const article = this.props.article;\n      let initialvote = [authUser.uid];\n\n      if (article.downvotes === 0) {\n        // console.log(\"typeof\", typeof (article.upvotes))\n        if (this.checkUpvote(authUser.uid, article.upvotes) === -1) {\n          this.setState({\n            downvotecolor: \"dodgerblue\",\n            upvotecolor: \"gray\"\n          });\n          this.props.firebase.article(article.uid).set(_objectSpread({}, article, {\n            downvotes: initialvote\n          }));\n        } else {\n          let uidIndex = this.checkUpvote(authUser.uid, article.upvotes);\n          let articlearray = article.upvotes;\n          articlearray.splice(uidIndex, 1);\n          this.setState({\n            downvotecolor: \"dodgerblue\",\n            upvotecolor: \"gray\"\n          });\n          this.props.firebase.article(article.uid).set(_objectSpread({}, article, {\n            downvotes: initialvote,\n            upvotes: articlearray\n          }));\n        }\n      } else {\n        // console.log(\"checkdownvote\", this.checkDownvote(authUser.uid, article.downvotes));\n        if (this.checkDownvote(authUser.uid, article.downvotes) === -1) {\n          if (this.checkUpvote(authUser.uid, article.upvotes) === -1) {\n            this.setState({\n              calculatedvote: this.state.calculatedvote - 1,\n              downvotecolor: \"dodgerblue\",\n              upvotecolor: \"gray\"\n            });\n            let downvotes = article.downvotes;\n            let updatedDownvotes = downvotes;\n            updatedDownvotes.push(authUser.uid);\n            this.props.firebase.article(article.uid).set(_objectSpread({}, article, {\n              downvotes: updatedDownvotes\n            }));\n          } else {\n            // console.log(\"checkDownvote\")\n            let uidindex = this.checkUpvote(authUser.uid, article.upvotes);\n            this.setState({\n              downvotecolor: \"dodgerblue\",\n              upvotecolor: \"gray\"\n            }); //   console.log(\"uid\", uidindex)\n\n            let articlearray = article.upvotes;\n            articlearray.splice(uidindex, 1); //  console.log(\"article.downvote\", article.downvotes)\n            //let downvotearray=article.downvotes.push(authUser.uid)\n\n            let downvotes = article.downvotes;\n            let updatedDownvotes = downvotes;\n            updatedDownvotes.push(authUser.uid);\n            this.props.firebase.article(article.uid).set(_objectSpread({}, article, {\n              upvotes: articlearray,\n              downvotes: updatedDownvotes\n            }));\n          }\n        } else {// console.log(\"already upvoted\")\n        }\n      }\n    };\n\n    this.checkUpvote = (uid, upvotes) => {\n      // console.log(\"filter\", upvotes, uid)\n      if (typeof upvotes === \"number\") {\n        return -1;\n      } else {\n        let filteredUpvote = upvotes.indexOf(uid); // console.log(\"filteredvote\", filteredUpvote)\n\n        return filteredUpvote;\n      }\n    };\n\n    this.checkDownvote = (uid, downvotes) => {\n      // console.log(\"filter\", downvotes, uid)\n      // console.log(\"typeof1\", typeof (downvotes))\n      if (typeof downvotes === \"number\") {\n        return -1;\n      } else {\n        let filteredDownvote = downvotes.indexOf(uid); // console.log(\"filteredvote\", filteredDownvote)\n\n        return filteredDownvote;\n      }\n    };\n\n    this.state = {\n      article: [],\n      upvotes: [],\n      downvotes: [],\n      calculatedvote: \"\",\n      upvotecolor: \"gray\",\n      downvotecolor: \"gray\",\n      username: \"\",\n      TotallComment: \"\",\n      totalcount: 0\n    };\n  }\n  /*sortByDtate () {\n        const {postList}= this.props\n        let newPostList = postList\n      if(this.state.isOldestFirst){\n        newPostList.sort((a,b) => a.timeCreated < b.timeCreated)\n      }\n      else {\n        newPostList.sort((a,b) =>a.timeCreated > b.timeCreated)\n      \n      }\n      this.setState({article:newPostList.sort((a,b) => a.timeCreated >b.timeCreated)})\n      }*/\n\n\n  componentDidMount() {\n    const article = this.props.article; // console.log(\"this is the new article:\", article)\n\n    let upvotes = article.upvotes; // console.log(\"this is the upvotes:\" + upvotes)\n\n    let downvotes = article.downvotes;\n    this.calculatedvote(upvotes, downvotes);\n    let autherId = article.userId;\n    this.unsubscribe = this.props.firebase.user(autherId).get().then(doc => {\n      // console.log(\"userdata\", doc.data())\n      let user = doc.data();\n      this.setState({\n        username: user.username\n      });\n    });\n  }\n\n  calculatedvote(upvotes, downvotes) {\n    if (upvotes === 0) {\n      upvotes = [];\n    }\n\n    if (downvotes === 0) {\n      downvotes = [];\n    }\n\n    let upvotesTotal = upvotes.length;\n    let downvotesTotal = downvotes.length;\n    let finalTotal = upvotesTotal - downvotesTotal; // console.log(\"upvotestotal\", upvotesTotal)\n    //console.log(\"downvotestotal\", downvotesTotal)\n\n    this.setState({\n      calculatedvote: finalTotal\n    });\n  }\n\n  render() {\n    if (this.props.isIndividualView === true) {\n      return React.createElement(AuthUserContext.Consumer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, authUser => React.createElement(\"div\", {\n        className: \"likes-individual\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"likes1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        style: {\n          fontSize: \"1em\",\n          marginRight: \"auto\",\n          marginLeft: \"auto\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"upvote-individual\",\n        onClick: () => this.handleUpvote(authUser),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-arrow-alt-up\",\n        style: {\n          color: this.state.upvotecolor\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, \" \")), this.state.calculatedvote, React.createElement(\"div\", {\n        className: \"downvote-individual\",\n        onClick: () => this.handleDownvote(authUser),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-arrow-alt-down\",\n        style: {\n          color: this.state.downvotecolor\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, \" \"))))));\n    } else {\n      return React.createElement(AuthUserContext.Consumer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, authUser => React.createElement(\"div\", {\n        className: \"Likis-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"likes\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        style: {\n          fontSize: \"1em\",\n          marginRight: \"auto\",\n          marginLeft: \"auto\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"upvote\",\n        onClick: () => this.handleUpvote(authUser),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-arrow-alt-up\",\n        style: {\n          color: this.state.upvotecolor\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316\n        },\n        __self: this\n      }, \" \")), this.state.calculatedvote, React.createElement(\"div\", {\n        className: \"downvote\",\n        onClick: () => this.handleDownvote(authUser),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-arrow-alt-down\",\n        style: {\n          color: this.state.downvotecolor\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, \" \")))), this.props.children));\n    }\n  }\n\n}\n\nexport default compose(withFirebase, withRouter)(ListItem1);","map":{"version":3,"sources":["/Users/nick/devedit/src/components/ListItem1/index.js"],"names":["React","withFirebase","compose","withRouter","AuthUserContext","ListItem1","Component","constructor","props","componentDidUpdate","prevProps","article","calculatedvote","upvotes","downvotes","checkurl","url","handleUpvote","authUser","initialvote","uid","checkDownvote","setState","downvotecolor","upvotecolor","firebase","set","uidIndex","articlearray","splice","checkUpvote","state","updatedUpvotes","push","uidindex","handleDownvote","updatedDownvotes","filteredUpvote","indexOf","filteredDownvote","username","TotallComment","totalcount","componentDidMount","autherId","userId","unsubscribe","user","get","then","doc","data","upvotesTotal","length","downvotesTotal","finalTotal","render","isIndividualView","fontSize","marginRight","marginLeft","color","children"],"mappings":"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","sourcesContent":["import React from \"react\";\n//import myimage from \"../../assets/images/nice-piccy3.jpg\";\nimport { withFirebase } from \"../Firebase\";\nimport { compose } from \"recompose\";\nimport { withRouter } from \"react-router-dom\";\nimport { AuthUserContext } from \"../Session\";\n\nclass ListItem1 extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      article: [],\n      upvotes: [],\n      downvotes: [],\n      calculatedvote: \"\",\n      upvotecolor: \"gray\",\n      downvotecolor: \"gray\",\n      username: \"\",\n      TotallComment: \"\",\n      totalcount: 0\n    };\n  }\n  /*sortByDtate () {\n        const {postList}= this.props\n        let newPostList = postList\n      if(this.state.isOldestFirst){\n        newPostList.sort((a,b) => a.timeCreated < b.timeCreated)\n      }\n      else {\n        newPostList.sort((a,b) =>a.timeCreated > b.timeCreated)\n      \n      }\n      this.setState({article:newPostList.sort((a,b) => a.timeCreated >b.timeCreated)})\n      }*/\n\n  componentDidMount() {\n    const { article } = this.props;\n    // console.log(\"this is the new article:\", article)\n    let upvotes = article.upvotes;\n    // console.log(\"this is the upvotes:\" + upvotes)\n    let downvotes = article.downvotes;\n    this.calculatedvote(upvotes, downvotes);\n    let autherId = article.userId;\n    this.unsubscribe = this.props.firebase\n      .user(autherId)\n      .get()\n      .then(doc => {\n        // console.log(\"userdata\", doc.data())\n        let user = doc.data();\n        this.setState({ username: user.username });\n      });\n  }\n\n  componentDidUpdate = prevProps => {\n    if (prevProps.article !== this.props.article) {\n      this.calculatedvote(\n        this.props.article.upvotes,\n        this.props.article.downvotes\n      );\n    }\n  };\n\n  checkurl = () => {\n    // console.log(\"check url\", this.props.article.url)\n    if (this.props.article.url === true) {\n      return <a href=\"{this.props.article.url}\">Related link</a>;\n    } else {\n      return null;\n    }\n  };\n\n  calculatedvote(upvotes, downvotes) {\n    if (upvotes === 0) {\n      upvotes = [];\n    }\n    if (downvotes === 0) {\n      downvotes = [];\n    }\n\n    let upvotesTotal = upvotes.length;\n    let downvotesTotal = downvotes.length;\n    let finalTotal = upvotesTotal - downvotesTotal;\n    // console.log(\"upvotestotal\", upvotesTotal)\n    //console.log(\"downvotestotal\", downvotesTotal)\n    this.setState({ calculatedvote: finalTotal });\n  }\n  handleUpvote = authUser => {\n    const { article } = this.props;\n    let initialvote = [authUser.uid];\n    if (article.upvotes === 0) {\n      if (this.checkDownvote(authUser.uid, article.downvotes) === -1) {\n        this.setState({\n          downvotecolor: \"gray\",\n          upvotecolor: \"darkred\"\n        });\n        this.props.firebase.article(article.uid).set({\n          ...article,\n          upvotes: initialvote\n        });\n        // console.log(\"upvotes\", this.upvotes)\n      } else {\n        let uidIndex = this.checkDownvote(authUser.uid, article.downvotes);\n        let articlearray = article.downvotes;\n        articlearray.splice(uidIndex, 1);\n        this.setState({\n          downvotecolor: \"gray\",\n          upvotecolor: \"darkred\"\n        });\n        this.props.firebase.article(article.uid).set({\n          ...article,\n          upvotes: initialvote,\n          downvotes: articlearray\n        });\n      }\n    } else {\n      if (this.checkUpvote(authUser.uid, article.upvotes) === -1) {\n        if (this.checkDownvote(authUser.uid, article.downvotes) === -1) {\n          // console.log(this.checkUpvote)\n          this.setState({\n            calculatedvote: this.state.calculatedvote + 1,\n            upvotecolor: \"darkred\",\n            downvotecolor: \"gray\"\n          });\n          let upvotes = article.upvotes;\n          let updatedUpvotes = upvotes;\n          updatedUpvotes.push(authUser.uid);\n          this.props.firebase.article(article.uid).set({\n            ...article,\n            upvotes: updatedUpvotes\n          });\n        } else {\n          //  console.log(\"checkDownvote\")\n          let uidindex = this.checkDownvote(authUser.uid, article.downvotes);\n          let articlearray = article.downvotes;\n          this.setState({\n            downvotecolor: \"gray\",\n            upvotecolor: \"darkred\"\n          });\n          articlearray.splice(uidindex, 1);\n          //  console.log(\"article.upvote\", article.upvotes)\n          //let upvotesarray=article.upvotes.push(authUser.uid)\n          let upvotes = article.upvotes;\n          let updatedUpvotes = upvotes;\n          updatedUpvotes.push(authUser.uid);\n          this.props.firebase.article(article.uid).set({\n            ...article,\n            downvotes: articlearray,\n            upvotes: updatedUpvotes\n          });\n        }\n      } else {\n        //  console.log(\"already upvoted\")\n      }\n    }\n  };\n  handleDownvote = authUser => {\n    const { article } = this.props;\n    let initialvote = [authUser.uid];\n\n    if (article.downvotes === 0) {\n      // console.log(\"typeof\", typeof (article.upvotes))\n      if (this.checkUpvote(authUser.uid, article.upvotes) === -1) {\n        this.setState({\n          downvotecolor: \"dodgerblue\",\n          upvotecolor: \"gray\"\n        });\n        this.props.firebase.article(article.uid).set({\n          ...article,\n          downvotes: initialvote\n        });\n      } else {\n        let uidIndex = this.checkUpvote(authUser.uid, article.upvotes);\n        let articlearray = article.upvotes;\n        articlearray.splice(uidIndex, 1);\n        this.setState({\n          downvotecolor: \"dodgerblue\",\n          upvotecolor: \"gray\"\n        });\n        this.props.firebase.article(article.uid).set({\n          ...article,\n          downvotes: initialvote,\n          upvotes: articlearray\n        });\n      }\n    } else {\n      // console.log(\"checkdownvote\", this.checkDownvote(authUser.uid, article.downvotes));\n      if (this.checkDownvote(authUser.uid, article.downvotes) === -1) {\n        if (this.checkUpvote(authUser.uid, article.upvotes) === -1) {\n          this.setState({\n            calculatedvote: this.state.calculatedvote - 1,\n            downvotecolor: \"dodgerblue\",\n            upvotecolor: \"gray\"\n          });\n          let downvotes = article.downvotes;\n          let updatedDownvotes = downvotes;\n          updatedDownvotes.push(authUser.uid);\n          this.props.firebase.article(article.uid).set({\n            ...article,\n            downvotes: updatedDownvotes\n          });\n        } else {\n          // console.log(\"checkDownvote\")\n          let uidindex = this.checkUpvote(authUser.uid, article.upvotes);\n          this.setState({\n            downvotecolor: \"dodgerblue\",\n            upvotecolor: \"gray\"\n          });\n          //   console.log(\"uid\", uidindex)\n          let articlearray = article.upvotes;\n          articlearray.splice(uidindex, 1);\n          //  console.log(\"article.downvote\", article.downvotes)\n          //let downvotearray=article.downvotes.push(authUser.uid)\n          let downvotes = article.downvotes;\n          let updatedDownvotes = downvotes;\n          updatedDownvotes.push(authUser.uid);\n          this.props.firebase.article(article.uid).set({\n            ...article,\n            upvotes: articlearray,\n            downvotes: updatedDownvotes\n          });\n        }\n      } else {\n        // console.log(\"already upvoted\")\n      }\n    }\n  };\n\n  checkUpvote = (uid, upvotes) => {\n    // console.log(\"filter\", upvotes, uid)\n    if (typeof upvotes === \"number\") {\n      return -1;\n    } else {\n      let filteredUpvote = upvotes.indexOf(uid);\n      // console.log(\"filteredvote\", filteredUpvote)\n\n      return filteredUpvote;\n    }\n  };\n  checkDownvote = (uid, downvotes) => {\n    // console.log(\"filter\", downvotes, uid)\n    // console.log(\"typeof1\", typeof (downvotes))\n    if (typeof downvotes === \"number\") {\n      return -1;\n    } else {\n      let filteredDownvote = downvotes.indexOf(uid);\n\n      // console.log(\"filteredvote\", filteredDownvote)\n\n      return filteredDownvote;\n    }\n  };\n  render() {\n    if (this.props.isIndividualView === true) {\n      return (\n        <AuthUserContext.Consumer>\n          {authUser => (\n            <div className=\"likes-individual\">\n              <div className=\"likes1\">\n                <span\n                  style={{\n                    fontSize: \"1em\",\n                    marginRight: \"auto\",\n                    marginLeft: \"auto\"\n                  }}\n                >\n                  <div\n                    className=\"upvote-individual\"\n                    onClick={() => this.handleUpvote(authUser)}\n                  >\n                    <i\n                      className=\"fas fa-arrow-alt-up\"\n                      style={{ color: this.state.upvotecolor }}\n                    >\n                      {\" \"}\n                    </i>\n                  </div>\n\n                  {this.state.calculatedvote}\n\n                  <div\n                    className=\"downvote-individual\"\n                    onClick={() => this.handleDownvote(authUser)}\n                  >\n                    <i\n                      className=\"fas fa-arrow-alt-down\"\n                      style={{\n                        color: this.state.downvotecolor\n                      }}\n                    >\n                      {\" \"}\n                    </i>\n                  </div>\n                </span>\n              </div>\n            </div>\n          )}\n        </AuthUserContext.Consumer>\n      );\n    } else {\n      return (\n        <AuthUserContext.Consumer>\n          {authUser => (\n            <div className=\"Likis-container\">\n              <div className=\"likes\">\n                <span\n                  style={{\n                    fontSize: \"1em\",\n                    marginRight: \"auto\",\n                    marginLeft: \"auto\"\n                  }}\n                >\n                  <div\n                    className=\"upvote\"\n                    onClick={() => this.handleUpvote(authUser)}\n                  >\n                    <i\n                      className=\"fas fa-arrow-alt-up\"\n                      style={{ color: this.state.upvotecolor }}\n                    >\n                      {\" \"}\n                    </i>\n                  </div>\n\n                  {this.state.calculatedvote}\n\n                  <div\n                    className=\"downvote\"\n                    onClick={() => this.handleDownvote(authUser)}\n                  >\n                    <i\n                      className=\"fas fa-arrow-alt-down\"\n                      style={{\n                        color: this.state.downvotecolor\n                      }}\n                    >\n                      {\" \"}\n                    </i>\n                  </div>\n                </span>\n              </div>\n              {this.props.children}\n            </div>\n          )}\n        </AuthUserContext.Consumer>\n      );\n    }\n  }\n}\nexport default compose(withFirebase, withRouter)(ListItem1);\n"]},"metadata":{},"sourceType":"module"}